<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="../../tasks.css">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>O que significa 卜爭?</title>
</head>
<body>

<h2>O que significa 卜爭?</h2>
<p class="instruction">Nas inscrições oraculares, 卜爭 é o nome de um adivinho. O que significa?</p>

<div id="options-container">
<!-- As opções serão adicionadas aqui -->
</div>

<button onclick="check()">Verificar</button>
<p id="result"></p>

<script>
const options = [
{ value: "wang", text: "Um vidente chamado Wang", correto: falso },
{ value: "zheng", text: "Um vidente chamado Zheng", correto: verdadeiro },
{ value: "ruler-zheng", text: "Governante Zheng", correto: falso },
{ value: "repeat", text: "A palavra 'adivinhação' está repetida", correto: falso }
];

let selectedValue = null;

function shuffleArray(array) {
const arr = [...array];
para (seja i = arr.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[arr[i], arr[j]] = [arr[j], arr[i]];
}
return arr;
}

function renderOptions() {
const container = document.getElementById("options-container");
container.innerHTML = "";
selectedValue = null;

const shuffled = shuffleArray(opções);

embaralhado.paraCada(opção => {
const rótulo = document.criarElemento("rótulo");
rótulo.NomeDaClasse = "opção";
rótulo.ConjuntoDeDados.Valor = opção.Valor;

const entrada = document.criarElemento("entrada");
entrada.Tipo = "rádio";
entrada.Nome = "resposta";
entrada.Valor = opção.Valor;

entrada.Alterar = () => {
ValorSelecionado = opção.Valor;
document.ConsultaSeletorAll('.Opção').ParaCada(el => el.ListaDeClasses.Remover('Selecionado'));
rótulo.ListaDeClasses.Adicionar('Selecionado');
};

const NóDeTexto = document.criarNóDeTexto(opção.Texto);

rótulo.AnexarFilho(entrada);
rótulo.AnexarFilho(NóDeTexto);
contêiner.AnexarFilho(rótulo);
});
}

function check() {
const resultEl = document.getElementById("result");
resultEl.className = "";

if (!selectedValue) {
resultEl.textContent = "Selecione uma opção.";
resultEl.className = "error";
return;
}

if (selectedValue === "zheng") {
resultEl.textContent = "✅ Correto! Zheng é Zheng, o vidente.";
resultEl.className = "sucesso";
sendResult(true);
} else {
resultEl.textContent = "❌ Não. Zheng aqui é um nome, não um "argumento."";
resultEl.className = "error";
sendResult(false);
}
}

function sendResult(sucesso, mensagem) {
window.parent.postMessage({
type: "TASK_RESULT",
success,
message: message || (sucesso? "Correto: 卜爭 é o nome Zheng" : "Erro na interpretação de 卜爭")
}, "*");
}

renderOptions();
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");
</script>
</body>
</html>