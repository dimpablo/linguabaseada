<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="../../tasks.css">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Correspondência: Kanji ↔ Significado</title>
</head>
<body>
<h2>Combinar Kanji e sua Tradução</h2>
<p>Clique no Kanji à esquerda e, em seguida, no significado à direita</p>

<div class="match-container">
<div class="column">
<h3>Palavras-chave</h3>
<div id="words"></div>
</div>
<div class="column">
<h3>Valores</h3>
<div id="defs"></div>
</div>
</div>

<button onclick="reset()">Redefinir</button>
<p id="result"></p>

<script>
const pairs = [
{ char: "寅", que significa: "Ramo Terrestre (3º)" },
{ char: "癸", que significa: "Ramo Celestial (10º)" },
{ char: "卯", que significa: "Ramo Terrestre (4º)" },
{ char: "㱿", que significa: "Jue (Substantivo Próprio)" },
{ char: "午", que significa: "Ramo Terrestre (7º)" }
];

let selectedWord = null;
let matchedPairs = 0;

function shuffle(arr) {
return [...arr].sort(() => Math.random() - 0.5);
}

function init() {
const ListaDePalavras = document.getElementById("palavras");
const ListaDeDeFs = document.getElementById("defs");

ListaDePalavras. HTMLInterno = "";

ListaDeDeFs. HTMLInterno = "";

const Caract.Embaralhados = embaralhar(pares);
const SignificadosEmbaralhados = embaralhar(pares. mapa(p => p. significado));

Caract.Embaralhados. paraCada(item => {
const el = document. criarElemento("div");
el. NomeDaClasse = "item-palavra";
el. conjuntoDeDados. char = item. char;
el. ConteúdoDoTexto = item. char;
el. aoClicar = () => selecionarPalavra(el);
ListaDePalavras. acrescentarFilho(el);
});

shuffledMeanings.forEach(meaning => {
const el = document.createElement("div");
el.className = "def-item";
el.dataset.meaning = meaning;
el.textContent = meaning;
el.onclick = () => selectDefinition(el);
defList.appendChild(el);
});
}

function selectWord(el) {
if (el.classList.contains("matched")) return;
document.querySelectorAll(".word-item.selected").forEach(e => e.classList.remove("selected"));
selectedWord = null;
el.classList.add("selected");
selectedWord = el;
}

function selectDefinition(el) {
if (el.classList.contains("correspondente") || !selectedWord) return;

const char = selectedWord.dataset.char;
const meaning = el.dataset.meaning;
const isCorrect = pairs.some(p => p.char === char && p.meaning === meaning);

if (isCorrect) {
el.classList.add("correspondente");
electedWord.classList.add("correspondente");
electedWord.onclick = null;
el.onclick = null;
electedWord = null;
matchedPairs++;

if (matchedPairs === 5) {
document.getElementById("result").textContent = "✅ Isso mesmo!";
document.getElementById("resultado").style.color = "#27ae60";
sendResult(true);
}
} else {
document.getElementById("resultado").textContent = "❌ Incorreto.";
document.getElementById("resultado").style.color = "#e74c3c";
setTimeout(() => {
document.getElementById("resultado").textContent = "";
}, 1500);

selectedWord.classList.remove("selected");
selectedWord = null;
}
}

function reset() {
matchedPairs = 0;
document.getElementById("resultado").textContent = "";
init();
}

function sendResult(sucesso, mensagem = "") {
window.parent.postMessage({
type: "TASK_RESULT",
success,
message: message || "Todos os pares estão corretos"
}, "*");
}

init();
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");
</script>
</body>
</html>